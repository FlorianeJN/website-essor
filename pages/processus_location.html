<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  
  <!-- Title et Meta description -->
  <title>Processus de Location - Essor Solidaire</title>
  <meta 
    name="description" 
    content="Découvrez comment devenir locataire chez Essor Solidaire grâce à un processus clair, rapide et transparent."
  >
  
  <!-- Keywords (optionnel) -->
  <meta 
    name="keywords" 
    content="Processus de location, location, Essor Solidaire, candidature locataire, immobilier Côte d'Ivoire, location d'appartements, appartements à Tiassalé, location d'appartements à Tiassalé"
  >

  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Canonical URL -->
  <link 
    rel="canonical" 
    href="https://www.essorsolidaireciv.com/processus_location.html" 
  />

  <!-- Open Graph Meta Tags -->
  <meta 
    property="og:title" 
    content="Processus de Location - Essor Solidaire" 
  />
  <meta 
    property="og:description" 
    content="Découvrez comment devenir locataire chez Essor Solidaire grâce à un processus clair, rapide et transparent." 
  />
  <meta 
    property="og:image" 
    content="https://www.essorsolidaireciv.com/images/hero2.jpg" 
  />
  <meta 
    property="og:url" 
    content="https://www.essorsolidaireciv.com/processus_location.html" 
  />
  <meta 
    property="og:type" 
    content="website" 
  />

  <!-- Twitter Card Meta Tags -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta 
    name="twitter:title" 
    content="Processus de Location - Essor Solidaire" 
  />
  <meta 
    name="twitter:description" 
    content="Découvrez comment devenir locataire chez Essor Solidaire grâce à un processus clair, rapide et transparent." 
  />
  <meta 
    name="twitter:image" 
    content="https://www.essorsolidaireciv.com/images/hero2.jpg" 
  />

  <!-- JSON-LD Structured Data : RealEstateAgent -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "RealEstateAgent",
    "name": "Essor Solidaire",
    "url": "https://www.essorsolidaireciv.com/",
    "logo": "https://www.essorsolidaireciv.com/images/logos/logo_vert-sf.png",
    "image": "https://www.essorsolidaireciv.com/images/background.jpg",
    "description": "Services Immobiliers Professionnels et Gestion d’Actifs en Côte d’Ivoire. Nous aidons les travailleurs à trouver un logement sécurisé, confortable et adapté à leurs besoins.",
    "address": {
      "@type": "PostalAddress",
      "streetAddress": "Yopougon Port Bouet 2",
      "addressLocality": "Abidjan",
      "addressCountry": "CI"
    },
    "contactPoint": {
      "@type": "ContactPoint",
      "telephone": "+2250702419652",
      "contactType": "customer service",
      "email": "contact@essorsolidaireciv.com"
    },
    "sameAs": [
      "https://www.facebook.com/YourPage",
      "https://twitter.com/YourProfile",
      "https://www.instagram.com/YourProfile"
    ]
  }
  </script>

  <!-- JSON-LD BreadcrumbList : fil d’Ariane -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [
      {
        "@type": "ListItem",
        "position": 1,
        "name": "Accueil",
        "item": "https://www.essorsolidaireciv.com/"
      },
      {
        "@type": "ListItem",
        "position": 2,
        "name": "Processus de Location",
        "item": "https://www.essorsolidaireciv.com/processus_location.html"
      }
    ]
  }
  </script>

  <style>
    /* ===============================
       ANIMATION KEYFRAMES
    ================================ */
    @keyframes fadeIn {
      0% {
        opacity: 0;
        transform: translateY(0);
      }
      100% {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes fadeInUp {
      0% {
        opacity: 0;
        transform: translateY(30px);
      }
      100% {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes fadeInLeft {
      0% {
        opacity: 0;
        transform: translateX(-30px);
      }
      100% {
        opacity: 1;
        transform: translateX(0);
      }
    }

    @keyframes fadeInRight {
      0% {
        opacity: 0;
        transform: translateX(30px);
      }
      100% {
        opacity: 1;
        transform: translateX(0);
      }
    }

    /* ===============================
       BASE CLASSES FOR FADE/SLIDE
    ================================ */
    .fade-in {
      opacity: 0; /* hidden by default */
    }
    .fade-in.appear {
      animation: fadeIn 0.8s ease forwards;
    }
    .fade-in-up {
      opacity: 0;
    }
    .fade-in-up.appear {
      animation: fadeInUp 0.8s ease forwards;
    }
    .fade-in-left {
      opacity: 0;
    }
    .fade-in-left.appear {
      animation: fadeInLeft 0.8s ease forwards;
    }
    .fade-in-right {
      opacity: 0;
    }
    .fade-in-right.appear {
      animation: fadeInRight 0.8s ease forwards;
    }
  </style>

  <!-- Favicon -->
  <link 
    rel="icon" 
    href="../images/logos/logo_vert-sf.png"
  >
  
  <!-- main.css -->
  <link 
    rel="stylesheet" 
    href="../styles/main.css"
  >

  <!-- Bootstrap 5 CSS (CDN) -->
  <link 
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" 
    rel="stylesheet"
  >

  <!-- Google Fonts -->
  <link 
    rel="preconnect" 
    href="https://fonts.googleapis.com"
  >
  <link 
    rel="preconnect" 
    href="https://fonts.gstatic.com" 
    crossorigin
  >
  <link 
    href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600&display=swap" 
    rel="stylesheet"
  >

  <!-- Bootstrap Icons -->
  <link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css"
  />

</head>

<body>
<!-- NAVBAR -->
<nav class="navbar navbar-expand-lg fixed-top shadow">
  <div class="container">
    <a class="navbar-brand fw-bold" href="../index.html">
      <img 
        src="../images/logos/logo_noir-sf.png" 
        class="logo" 
        alt="Logo Essor Solidaire, agence immobilière en Côte d’Ivoire"
      >
    </a>
    <button 
      class="navbar-toggler text-white" 
      type="button" 
      data-bs-toggle="collapse" 
      data-bs-target="#mainNavbar" 
      aria-controls="mainNavbar" 
      aria-expanded="false" 
      aria-label="Basculer la navigation"
    >
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="mainNavbar">
      <ul class="navbar-nav ms-auto">
        <li class="nav-item"><a class="nav-link" href="../index.html">Accueil</a></li>
        <li class="nav-item"><a class="nav-link" href="../index.html#apropos">À Propos</a></li>
        <li class="nav-item"><a class="nav-link" href="../index.html#services">Services</a></li>
        <li class="nav-item"><a class="nav-link" href="./processus_location.html#">Processus de location</a></li>
        <li class="nav-item"><a class="nav-link" href="../index.html#projets">Projets</a></li>
        <li class="nav-item"><a class="nav-link" href="../index.html#contact">Contact</a></li>
      </ul>
    </div>
  </div>
</nav>

<!-- HERO SECTION (Avec <h1> unique) -->
<section 
  id="hero-process" 
  class="d-flex align-items-center fade-in-up"
  style="position: relative; height: 95vh; 
         background: linear-gradient(45deg, rgba(0,0,0,0.5), rgba(0,0,0,0.5)),
         url('../images/background.jpg') no-repeat center center/cover;"
>
  <div class="container">
    <div class="row align-items-center">
      <!-- Colonne de texte et CTA -->
      <div class="col-md-6 text-white text-center text-md-start fade-in-left">
        <h1 class="mb-3" style="font-size: 3rem;">Processus de Location</h1>
        <p class="mb-4" style="font-size: 1.2rem;">
          Découvrez comment devenir locataire chez Essor Solidaire grâce à un processus clair, rapide et transparent.
        </p>
        <a href="#quiz-criteres" class="btn btn-light btn-lg">Commencer</a>
      </div>
      <!-- Colonne d'informations supplémentaires -->
      <div class="col-md-6 d-none d-md-block text-white fade-in-right">
        <div class="ms-5">
          <h4 class="mb-3" style="font-size: 1.8rem;">Nos Atouts :</h4>
          <ul class="list-unstyled" style="font-size: 1.1rem;">
            <li class="mb-2">
              <i class="bi bi-check-circle-fill me-2"></i>
              Sélection rigoureuse des candidats
            </li>
            <li class="mb-2">
              <i class="bi bi-check-circle-fill me-2"></i>
              Processus simplifié et transparent
            </li>
            <li class="mb-2">
              <i class="bi bi-check-circle-fill me-2"></i>
              Accompagnement personnalisé
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- QUIZ DES CRITÈRES DE SÉLECTION -->
<section 
  id="quiz-criteres" 
  class="py-5 fade-in-up" 
  style="scroll-margin-top: 80px;"
>
  <div class="container">
    <h2 class="section-title text-center mb-5">Vérifiez Votre Éligibilité</h2>
    <div class="row justify-content-center">
      <div class="col-md-8">
        <div class="p-4 bg-white shadow rounded-3 text-center mx-auto" id="criteriaWizard">
          <div id="criterionQuestion" class="mb-3 fs-5">
            <div id="questionTitle" class="fw-semibold mb-1"></div>
            <div id="questionDescription"></div>
          </div>
          <div>
            <button class="btn btn-outline-dark me-3" onclick="handleAnswer(true)">
              Oui
            </button>
            <button class="btn btn-outline-dark" onclick="handleAnswer(false)">
              Non
            </button>
          </div>
        </div>

        <!-- Félicitations -->
        <div 
          id="felicitations" 
          class="alert alert-success mt-4 text-center" 
          style="display: none;"
        >
          <strong>Félicitations !</strong> Vous répondez à tous nos critères de présélection.  
          <br>Veuillez faire défiler la page pour découvrir nos critères détaillés et nos étapes de location.
        </div>

        <!-- Non éligible -->
        <div 
          id="notEligible" 
          class="alert alert-warning mt-4 text-center" 
          style="display: none;"
        >
          <strong>Désolé !</strong> Vous ne répondez pas à un de nos critères.  
          <br>Pour en savoir plus sur nos exigences, veuillez consulter la section "Critères de Sélection" ci-dessous ou nous contacter.
        </div>
      </div>
    </div>
  </div>
</section>

<!-- SECTION : CRITÈRES DE SÉLECTION (masqué par défaut) -->
<section 
  id="detailedCriteres" 
  class="py-5" 
  style="display: none;"
>
  <div class="container">
    <h2 class="section-title text-center mb-5 fade-in-up">Critères de Sélection</h2>
    <div class="row g-4">
      <!-- Critère 1 -->
      <div class="col-md-6 fade-in-left">
        <div class="p-4 bg-white shadow rounded-3">
          <h3 class="mb-3">Stabilité Professionnelle</h3>
          <p>
            Nos appartements sont réservés à des travailleurs bien établis. 
            Nous examinons la stabilité de votre emploi
            pour assurer une relation locative durable.
          </p>
        </div>
      </div>
      <!-- Critère 2 -->
      <div class="col-md-6 fade-in-right">
        <div class="p-4 bg-white shadow rounded-3">
          <h3 class="mb-3">Solide Situation Financière</h3>
          <p>
            La stabilité financière de nos candidats est essentielle. 
            Nous nous assurons que vous disposez des garanties nécessaires pour la location.
          </p>
        </div>
      </div>
      <!-- Critère 3 -->
      <div class="col-md-6 fade-in-left">
        <div class="p-4 bg-white shadow rounded-3">
          <h3 class="mb-3">Engagement Personnel</h3>
          <p>
            Nous recherchons des locataires responsables et respectueux 
            des règles de vie en communauté, contribuant ainsi à un cadre de vie agréable.
          </p>
        </div>
      </div>
      <!-- Critère 4 -->
      <div class="col-md-6 fade-in-right">
        <div class="p-4 bg-white shadow rounded-3">
          <h3 class="mb-3">Vérification des Antécédents</h3>
          <p>
            Un contrôle de vos antécédents est réalisé afin de garantir 
            un environnement harmonieux et sécurisé pour l’ensemble des locataires.
          </p>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Reste de la page (Étapes + Avantages) masqué si NON -->
<div id="restOfPage" style="display: none;">

  <!-- SECTION : AVANTAGES -->
  <section 
    id="avantages" 
    class="py-5 fade-in-up"
  >
    <div class="container">
      <h2 class="section-title text-center mb-5">Optez pour Essor Solidaire</h2>
      <div class="row g-4">
        <!-- Avantage 1 -->
        <div class="col-md-4 fade-in-left">
          <div class="p-4 bg-white shadow rounded-3 text-center">
            <div class="mb-3 fs-1 text-primary">
              <i class="bi bi-shield-lock" style="color: #000;"></i>
            </div>
            <h3 class="mb-3">Sécurité 24/7</h3>
            <p class="text-justify">
              ESSOR SOLIDAIRE assure une sécurité optimale avec un service de gardiennage disponible 24 heures sur 24, 7 jours sur 7, ainsi que la maintenance continue de la cité pour garantir un environnement sûr et bien entretenu.
            </p>
          </div>
        </div>
        <!-- Avantage 2 -->
        <div class="col-md-4 fade-in-up">
          <div class="p-4 bg-white shadow rounded-3 text-center">
            <div class="mb-3 fs-1 text-primary">
              <i class="bi bi-lightning-charge-fill" style="color: #000;"></i>
            </div>
            <h3 class="mb-3">Groupe électrogène</h3>
            <p class="text-justify">
              Pour garantir une alimentation continue en cas de coupure de courant, ESSOR SOLIDAIRE met gratuitement à disposition un groupe électrogène en cas de coupure générale d’électricité (non applicable en cas de coupure due à des factures impayées).
            </p>
          </div>
        </div>
        <!-- Avantage 3 -->
        <div class="col-md-4 fade-in-right">
          <div class="p-4 bg-white shadow rounded-3 text-center">
            <div class="mb-3 fs-1 text-primary">
              <i class="bi bi-cash-coin" style="color: #000;"></i>
            </div>
            <h3 class="mb-3">Loyer gratuit en Décembre</h3>
            <p class="text-justify">
              Dans un esprit de solidarité, ESSOR SOLIDAIRE offre la gratuité du loyer pour le mois de Décembre afin de soutenir nos locataires pendant les fêtes de fin d'année et renforcer l'esprit solidaire de notre communauté.
            </p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- SECTION : ÉTAPES DU PROCESSUS -->
  <section 
    id="etapes" 
    class="py-5 bg-light fade-in-up"
  >
    <div class="container">
      <h2 class="section-title text-center mb-5">Étapes du Processus de Location</h2>
      <div class="row g-4">
        <div class="col-md-12">
          <div class="p-4 bg-white shadow rounded-3">
            <ol class="list-group list-group-numbered">
              <li class="list-group-item">
                <strong>Soumission de la Demande :</strong> Le locataire potentiel soumet sa demande en fournissant les informations nécessaires concernant son emploi, son revenu, son historique locatif, et sa situation financière.
              </li>
              <li class="list-group-item">
                <strong>Analyse de la Demande :</strong> Nous procédons à une analyse détaillée des critères tels que la stabilité professionnelle, l'historique locatif, l'absence d'incidents judiciaires, ainsi que la capacité à entretenir le bien et respecter les règles de la communauté.
              </li>
              <li class="list-group-item">
                <strong>Vérification des Documents :</strong> Les documents justificatifs, tels que les fiches de paie et les attestations d'emploi, sont demandés et vérifiés pour confirmer la stabilité et la fiabilité du demandeur.
              </li>
              <li class="list-group-item">
                <strong>Validation et Signature du Contrat :</strong> Une fois la demande validée et les documents vérifiés, le contrat de location est signé, assurant ainsi un accord clair et sécurisé pour les deux parties.
              </li>
            </ol>
            <div class="text-center mt-4" id="downloadFormContainer">
              <a 
                href="../data/formulaire_location.pdf" 
                download="../data/formulaire_location.pdf" 
                class="btn btn-outline-dark btn-lg"
              >
                Télécharger le formulaire de demande de location
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
</div>

<!-- CONTACT (masqué par défaut) -->
<section 
  id="contact" 
  class="py-5 fade-in-up" 
  style="display: none;"
>
  <div class="container">
    <h2 id="contactHeading" class="section-title text-center mb-4">
      Soumission de demande de location
    </h2>
    <p class="text-center mb-5" id="contactIntro">
      Vous pouvez soumettre votre demande en utilisant ce formulaire. N'oubliez pas de joindre à votre message tous les documents demandés.
    </p>
    <div class="row g-4 justify-content-center">
      <!-- Coordonnées (cachées si non éligible) -->
      <div 
        class="col-md-4" 
        id="contactCoordinates" 
        style="display: none;"
      >
        <div class="rounded-3 shadow p-4 h-100 bg-white fade-in">
          <h4 class="mb-3">Coordonnées</h4>
          <div class="d-flex align-items-center mb-3">
            <i class="bi bi-envelope fs-5 me-3" style="color: #000;"></i>
            <span>contact@essorsolidaireciv.com</span>
          </div>
          <div class="d-flex align-items-center mb-3">
            <i class="bi bi-telephone fs-5 me-3" style="color: #000;"></i>
            <span>+225 07 02 41 96 52</span>
          </div>
          <div class="d-flex align-items-center">
            <i class="bi bi-geo-alt fs-5 me-3" style="color: #000;"></i>
            <span>Abidjan, Yopougon Port Bouet 2</span>
          </div>
        </div>
      </div>

      <!-- Formulaire de contact -->
      <div 
        class="col-md-6" 
        id="contactForm"
      >
        <div class="rounded-3 shadow p-4 h-100 bg-white fade-in">
          <form 
            action="https://formspree.io/f/xkgozywa" 
            method="POST"
          >
            <!-- Champ Nom -->
            <div class="mb-3">
              <label for="name" class="form-label">Nom</label>
              <div class="input-group">
                <span class="input-group-text"><i class="bi bi-person"></i></span>
                <input 
                  type="text" 
                  class="form-control" 
                  id="name" 
                  name="name" 
                  placeholder="Entrez votre nom" 
                  required
                >
              </div>
            </div>

            <!-- Champ Téléphone -->
            <div class="mb-3">
              <label for="phone" class="form-label">Téléphone</label>
              <div class="input-group">
                <span class="input-group-text"><i class="bi bi-telephone"></i></span>
                <input 
                  type="tel" 
                  class="form-control" 
                  id="phone" 
                  name="phone" 
                  placeholder="Entrez votre numéro de téléphone" 
                  required
                >
              </div>
            </div>
    
            <!-- Champ Email -->
            <div class="mb-3">
              <label for="email" class="form-label">Courriel</label>
              <div class="input-group">
                <span class="input-group-text"><i class="bi bi-envelope"></i></span>
                <input 
                  type="email" 
                  class="form-control" 
                  id="email" 
                  name="_replyto" 
                  placeholder="Entrez votre courriel" 
                  required
                >
              </div>
            </div>
    
            <!-- Champ Message -->
            <div class="mb-3">
              <label for="message" class="form-label">Message</label>
              <div class="input-group">
                <span class="input-group-text"><i class="bi bi-chat-text"></i></span>
                <textarea 
                  class="form-control" 
                  id="message" 
                  name="message" 
                  rows="5" 
                  placeholder="Entrez votre message" 
                  required
                ></textarea>
              </div>
            </div>
    
            <!-- Champ : Joindre un fichier (si éligible) -->
            <div 
              class="mb-3" 
              id="fileAttachmentSection"
            >
              <label for="file" class="form-label">Joindre des fichiers</label>
              <input 
                type="file" 
                class="form-control" 
                id="file" 
                name="attachments[]" 
                multiple
              >
            </div>
    
            <!-- Champ caché pour l'objet du mail -->
            <input 
              type="hidden" 
              name="_subject"
              id="formSubject" 
              value="Nouvelle demande de location Essor Solidaire"
            >
    
            <!-- Bouton d’envoi -->
            <button 
              type="submit" 
              class="btn btn-dark btn-lg w-100"
            >
              <i class="bi bi-send me-1"></i> Envoyer mon message
            </button>
          </form>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- FOOTER -->
<footer 
class="bg-white py-4 mt-5 border"
>
<div class="container">
  <div class="row align-items-center">
    <!-- Branding & Logo -->
    <div class="col-md-4 text-center text-md-start mb-3 mb-md-0">
      <a 
        href="index.html" 
        class="d-inline-flex align-items-center text-decoration-none"
      >
        <img 
          src="../images/logos/logo_noir-sf.png" 
          class="logo" 
          alt="Logo Essor Solidaire, agence immobilière en Côte d’Ivoire"
        >
      </a>
      <p class="small text-muted mb-0">
        &copy; 2025 Essor Solidaire. Tous droits réservés.
      </p>
      <p class="small text-muted mb-0">
        Conçu et développé par 
        <a 
          target="_blank" 
          href="https://florianenikebie.netlify.app/" 
          class="text-dark text-decoration-none"
        >
          Floriane Nikébié
        </a>.
      </p>
    </div>
    <!-- Contact Information -->
    <div class="col-md-4 text-center mb-3 mb-md-0">
      <p class="small text-muted mb-0">
        <i class="bi bi-telephone me-1"></i> +225 07 02 41 96 52<br>
        <i class="bi bi-envelope me-1"></i> tape.auguste@essorsolidaireciv.com <br>
        <i class="bi bi-geo-alt"></i> Abidjan, Yopougon Port Bouet 2
      </p>
    </div>
    <!-- Social Media Links -->
    <div class="col-md-4 text-center text-md-end">
      <ul class="list-unstyled d-inline-flex mb-0">
        <li class="ms-3">
          <a class="text-dark" href="#">
            <i class="bi bi-twitter fs-5"></i>
          </a>
        </li>
        <li class="ms-3">
          <a class="text-dark" href="#">
            <i class="bi bi-instagram fs-5"></i>
          </a>
        </li>
        <li class="ms-3">
          <a class="text-dark" href="#">
            <i class="bi bi-facebook fs-5"></i>
          </a>
        </li>
      </ul>
    </div>
  </div>
</div>
</footer>


<!-- Bootstrap 5 JS -->
<script 
  src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"
></script>

<!-- Intersection Observer / quiz script -->
<script>

  const apartmentsAvailable = false; //Toggle to true if at least one appartment is available

  document.addEventListener("DOMContentLoaded", function () {
    /* ... Script d’intersection observer + quiz (inchangé, sauf alt texts / localStorage) ... */

    // ----------------------------------------------------------------
    // Fonctions utilitaires pour localStorage : éligibilité
    // ----------------------------------------------------------------
    function getEligibilityData() {
      const dataJSON = localStorage.getItem("eligibilityData");
      if (!dataJSON) return null;
      try {
        return JSON.parse(dataJSON);
      } catch (e) {
        return null;
      }
    }

    function setEligibilityData(status) {
      // status = "yes" ou "no"
      const data = {
        eligibility: status,
        timestamp: Date.now()
      };
      localStorage.setItem("eligibilityData", JSON.stringify(data));
    }

    function isEligibilityDataValid() {
      const storedData = getEligibilityData();
      if (!storedData) return false;
      const currentTime = Date.now();
      const storedTime = storedData.timestamp;
      // 12 heures => 12 * 60 * 60 * 1000 
      // (Ici simplifié en 60 000 ms = 1 minute pour test, ajustez en production)
      const HOURS_12 =  60 * 1000; 
      return (currentTime - storedTime) < HOURS_12;
    }

    // Intersection Observer pour les animations
    const animatedEls = document.querySelectorAll(".fade-in, .fade-in-up, .fade-in-left, .fade-in-right");
    const observerOptions = { threshold: 0.1, rootMargin: "0px 0px -50px 0px" };
    const onScrollObserver = new IntersectionObserver((entries, obs) => {
      entries.forEach((entry) => {
        if (!entry.isIntersecting) return;
        entry.target.classList.add("appear");
        obs.unobserve(entry.target);
      });
    }, observerOptions);
    animatedEls.forEach((el) => onScrollObserver.observe(el));

    // DOM elements
    const quizCriteresContainer = document.getElementById("quiz-criteres");
    const criteriaWizard = document.getElementById("criteriaWizard");
    const questionTitleElem = document.getElementById("questionTitle");
    const questionDescriptionElem = document.getElementById("questionDescription");
    const criterionContainer = document.getElementById("criterionQuestion");
    const felicitations = document.getElementById("felicitations");
    const notEligible = document.getElementById("notEligible");
    const detailedCriteres = document.getElementById("detailedCriteres");
    const restOfPage = document.getElementById("restOfPage");
    const contactSection = document.getElementById("contact");
    const contactHeading = document.getElementById("contactHeading");
    const contactIntro = document.getElementById("contactIntro");
    const contactCoordinates = document.getElementById("contactCoordinates");
    const contactForm = document.getElementById("contactForm");
    const fileAttachmentSection = document.getElementById("fileAttachmentSection");
    const subjectInput = document.getElementById("formSubject");
    const downloadFormContainer = document.getElementById("downloadFormContainer");

    // Questions
    const criteres = [
      {
        title: "1 - Stabilité professionnelle et Situation financière",
        content: "Avez-vous un emploi stable, un revenu régulier et une situation financière saine, sans dettes ni incidents judiciaires ?"
      },
      {
        title: "2 - Historique locatif",
        content: "Avez-vous un historique de paiements de loyers fiable et sans incidents majeurs ?"
      },
      {
        title: "3 - Entretien du bien et Respect des règles",
        content: "Êtes-vous prêt à maintenir le bon état du bien immobilier et à respecter les règles de la communauté ?"
      },
      {
        title: "4 - Documents justificatifs",
        content: "Êtes-vous disposé à fournir les documents nécessaires (fiches de paie, attestations d'emploi, relevés bancaires, etc.) ?"
      }
    ];

    let currentIndex = 0;

    function displayCurrentCriterion() {
      questionTitleElem.textContent = criteres[currentIndex].title;
      questionDescriptionElem.textContent = criteres[currentIndex].content;
      criterionContainer.style.opacity = 1;
    }

    window.handleAnswer = function (isYes) {
      criterionContainer.style.opacity = 0;
      setTimeout(function () {
        if (isYes) {
          currentIndex++;
          subjectInput.value = "Nouvelle demande de location Essor Solidaire";
          if (currentIndex < criteres.length) {
            displayCurrentCriterion();
          } else {
            onEligible();
          }
        } else {
          subjectInput.value = "Nouveau message du site web Essor Solidaire";
          onNotEligible();
        }
        criterionContainer.style.opacity = 1;
      }, 500);
    };

    function onEligible() {
    // Mark quiz completed
    quizCriteresContainer.classList.add("completed");
    criteriaWizard.classList.add("completed");
    setEligibilityData("yes");
    
    notEligible.style.display = "none";
    detailedCriteres.style.display = "block";
    restOfPage.style.display = "block";
    contactSection.style.display = "block";
    
    // If apartments ARE available: show the form and normal text
    if (apartmentsAvailable) {
      downloadFormContainer.style.display = "block";
      felicitations.style.display = "block";
      felicitations.innerHTML = `
        <strong>Félicitations !</strong> Vous répondez à tous nos critères de sélection.
        <br>Vous trouverez sur cette page toutes les informations nécéssaires à la location d'un de nos biens.
      `;
      
      contactCoordinates.style.display = "block";
      contactForm.style.display = "block";
      fileAttachmentSection.style.display = "block";
      
      contactHeading.textContent = "Soumission de demande de location";
      contactIntro.textContent = 
        "Vous pouvez soumettre votre demande en utilisant ce formulaire. "
        + "N'oubliez pas de joindre à votre message tous les documents demandés.";
    
    // If apartments are NOT available: show unavailability message, hide form
    } else {
      felicitations.style.display = "block";
      felicitations.innerHTML = `
        <strong>Félicitations !</strong><br>
        Vous répondez à tous nos critères de présélection.
        <br><br>
        Cependant, nos appartements sont actuellement indisponibles.
        Nous rouvrirons le formulaire de demande dès qu’un bien sera disponible.
      `;
      
      downloadFormContainer.style.display = "none";
      contactCoordinates.style.display = "none";
      contactForm.style.display = "none";
      fileAttachmentSection.style.display = "none";
      
      contactHeading.textContent = "Appartements temporairement indisponibles";
      contactIntro.textContent =
        "Merci pour votre intérêt. Nous vous tiendrons informé(e) dès qu’un logement sera de nouveau disponible !";
    }
  }


    function initEligibilityFlow() {
      if (isEligibilityDataValid()) {
        const storedData = getEligibilityData();
        if (storedData.eligibility === "yes") {
          quizCriteresContainer.classList.add("completed");
          criteriaWizard.classList.add("completed");
          onEligible();
        } else {
          quizCriteresContainer.classList.add("completed");
          criteriaWizard.classList.add("completed");
          onNotEligible();
        }
      } else {
        currentIndex = 0;
        displayCurrentCriterion();
      }
    }

    initEligibilityFlow();

    // Auto collapse navbar
    const navLinks = document.querySelectorAll(".navbar-nav .nav-link");
    const navCollapse = document.getElementById("mainNavbar");
    navLinks.forEach(function (link) {
      link.addEventListener("click", function () {
        const isTogglerVisible =
          window.getComputedStyle(document.querySelector(".navbar-toggler")).display !== "none";
        if (isTogglerVisible) {
          const bsCollapse = bootstrap.Collapse.getInstance(navCollapse);
          bsCollapse.hide();
        }
      });
    });
  });
</script>
</body>
</html>
